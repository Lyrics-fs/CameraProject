# CameraProject - 基于相机响应曲线的Android相机应用

## 项目简介

CameraProject是河海大学大创项目，专注于基于相机响应曲线的Android相机软件开发。本应用利用Android Camera2 API实现了对相机参数的精确控制，包括ISO感光度、曝光时间等，并能根据拍摄图像生成伪彩色图像，用于可视化分析场景亮度分布。

### 技术背景

相机响应曲线描述了场景辐射亮度与相机输出之间的关系，是计算机视觉和摄影学中的重要概念。通过对相机响应曲线的研究和应用，可以实现：
- 高动态范围(HDR)图像合成
- 场景亮度的精确测量
- 图像亮度校正和增强
- 不同曝光条件下图像的标准化处理

### 研究意义

本项目通过Android平台实现相机响应曲线的应用，为移动设备上的计算摄影学研究提供了实用工具，可应用于以下领域：
- 环境光照测量与分析
- 建筑物光照条件评估
- 摄影教学与实践
- 计算机视觉研究

## 功能特性

### 核心功能
- **手动相机参数控制**：精确调节ISO感光度和曝光时间
- **实时预览**：相机参数调整实时反馈到预览画面
- **伪彩色图像生成**：将灰度图转换为伪彩色图像，直观显示亮度分布
- **亮度计算与显示**：基于相机参数计算场景亮度值(cd/m²)
- **EXIF数据提取**：读取图像元数据中的亮度信息
- **图像保存**：同时保存原始图像和伪彩色处理后的图像

### 相机响应曲线相关功能
- 基于公式 L = 2.9 × exp(0.729×BV) 计算场景亮度
- 亮度区间可视化显示
- 多点采样计算平均亮度

### 用户界面特性
- 直观的滑动条控制相机参数
- 实时显示计算得到的亮度值
- 伪彩色图像附带亮度图例
- 简洁的拍照和预览界面

## 技术架构

### 环境要求
- Android SDK 24+（Android 7.0及以上）
- 支持Camera2 API的Android设备
- 编译SDK 35

### 主要技术栈
- **Camera2 API**：提供对相机硬件的底层控制
- **TextureView**：高性能相机预览显示
- **ImageReader**：高效图像数据处理
- **ExifInterface**：读取图像元数据
- **Canvas & Bitmap**：图像处理与伪彩色转换

### 核心算法
- **相机响应曲线计算**：L = 2.9 × exp(0.729×BV)
- **伪彩色映射算法**：基于灰度值区间的彩色映射
- **亮度区间划分**：动态计算亮度L的区间范围
- **图像旋转与处理**：处理不同设备方向的图像校正

## 安装和使用

### 环境配置
1. Android Studio 4.0+
2. JDK 11+
3. Gradle 8.0+

### 编译步骤
1. 克隆项目到本地
   ```
   git clone https://github.com/yourusername/CameraProject.git
   ```
2. 使用Android Studio打开项目
3. 同步Gradle依赖
4. 构建并运行应用

### 使用说明
1. 启动应用后，授予相机和存储权限
2. 使用滑动条调节ISO、曝光时间或整体亮度
3. 点击"拍照"按钮捕获图像
4. 查看生成的伪彩色图像及亮度分析
5. 图像将自动保存到设备的DCIM/Camera目录

## 项目结构

### 主要文件说明
- `MainActivity.java`：应用主要逻辑和相机控制
- `activity_main.xml`：用户界面布局
- `AndroidManifest.xml`：应用配置和权限声明

### 关键类和方法
- `MainActivity`：应用入口和相机控制核心
- `openCamera()`：初始化并打开相机
- `takePicture()`：捕获静态图像
- `createPseudoColorImage()`：生成伪彩色图像和亮度图例
- `updateBrightness()/updateIso()/updateExposure()`：更新相机参数

## 开发团队

### 团队成员
- [团队成员姓名1] - [角色/职责]
- [团队成员姓名2] - [角色/职责]
- [团队成员姓名3] - [角色/职责]

### 指导老师
- [指导老师姓名] - [所属院系]

### 参考资料
- Camera2 API官方文档: https://developer.android.com/reference/android/hardware/camera2/package-summary
- 相机响应曲线理论: [相关论文或书籍引用]
- 伪彩色图像处理技术: [相关技术文档]

## 许可证
本项目采用[许可证类型]许可证 - 详情请参阅LICENSE文件
